# Schedules — Automation Configuration
#
# DESIGN REFERENCE — describes the intended automation schedule.
# donna-server on Railway is currently STOPPED. These jobs are not running automatically.
# Current mode: local Claude Code with manual command invocation (/gm, /triage, etc.)
# When donna-server is reactivated, cron.ts implements these schedules.
#
# Source of truth (code): donna-server/src/cron.ts
# Timezone: America/Toronto (ET)
# Total: 8 jobs, ~12 oneShot() calls/day (when active)
# Last updated: 2026-02-24

schedules:

  # ===================================================================
  # MORNING BRIEFING
  # ===================================================================

  - name: "Morning Briefing"
    cron: "0 8 * * 1-5"
    delivery: "terminal"
    calls: 1
    notes: "Full briefing: calendar, tasks, goals, urgent inbox."

  # ===================================================================
  # INBOX PRE-PROCESS
  # ===================================================================

  - name: "Inbox Pre-Process"
    cron: "0 9,13,17 * * 1-5"
    delivery: "terminal (only if drafts created)"
    calls: 3
    notes: "3x daily. Checks both Gmail accounts for unread. Drafts responses in Gmail. Never sends. Tier 1+2 only. Reports SKIP if no new emails."

  # ===================================================================
  # MEETING PREP
  # ===================================================================

  - name: "Meeting Prep"
    cron: "15 8 * * 1-5"
    delivery: "terminal summary"
    calls: 1
    notes: "8:15 AM. Research participants, write context brief, push talking points to Fellow."

  # ===================================================================
  # MEETING CHECK (pre-meeting context + post-meeting debrief)
  # ===================================================================

  - name: "Meeting Check"
    cron: "0 11,15 * * 1-5"
    delivery: "terminal"
    calls: 2
    notes: "2x daily (11am, 3pm). Post-meeting: Fellow first, then Granola for transcripts — extract action items, create Notion tasks, draft follow-ups. Pre-meeting: surface context for meetings in next 2h."

  # ===================================================================
  # DAILY WORK (execute Donna-assigned tasks)
  # ===================================================================

  - name: "Daily Work"
    cron: "0 10,14 * * 1-5"
    delivery: "terminal"
    calls: 2
    notes: "2x daily (10am, 2pm). Pull pending tasks from Notion assigned to Donna. Execute safe ones (research, enrichment, CRM, drafting). Mark needs_review for anything requiring Vahid."

  # ===================================================================
  # EVENING TRIAGE
  # ===================================================================

  - name: "Evening Triage"
    cron: "30 17 * * 1-5"
    delivery: "terminal"
    calls: 1
    notes: "End-of-day wrap: urgent emails, tasks completed today, tomorrow's prep."

  # ===================================================================
  # SYSTEM HEALTH CHECK
  # ===================================================================

  - name: "System Health Check"
    cron: "0 6,18 * * *"
    delivery: "terminal (only if failures)"
    calls: 2
    notes: "2x daily (incl weekends). Tests all MCP servers with real queries. Reports failures only."

  # ===================================================================
  # GIT AUTO-SYNC (no oneShot — execSync only)
  # ===================================================================

  - name: "Git Auto-Sync"
    cron: "0 * * * *"
    delivery: "silent"
    calls: 0
    notes: "Hourly. Commits + pushes any files Donna created/modified. No Claude process — pure git commands."

# ===================================================================
# Summary (when donna-server is active)
# ===================================================================
#
# Daily (Mon-Fri):
#   8:00 AM  Morning Briefing
#   8:15 AM  Meeting Prep
#   9:00 AM  Inbox Pre-Process
#   10:00 AM Daily Work
#   11:00 AM Meeting Check
#   1:00 PM  Inbox Pre-Process
#   2:00 PM  Daily Work
#   3:00 PM  Meeting Check
#   5:00 PM  Inbox Pre-Process
#   5:30 PM  Evening Triage
#
# Daily (all days):
#   6:00 AM  System Health Check
#   6:00 PM  System Health Check
#   every hour  Git Auto-Sync (no Claude process)
#
# Total oneShot() calls/day: ~12
